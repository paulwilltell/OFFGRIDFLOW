# OffGridFlow Configuration Template
# Copy this file to .env and fill in your values
# All OFFGRIDFLOW_* variables can use defaults if not provided

# =========================================================================
# SERVER CONFIGURATION
# =========================================================================
# HTTP port (default: 8090)
OFFGRIDFLOW_HTTP_PORT=8090

# Application environment: development, staging, production (default: development)
OFFGRIDFLOW_APP_ENV=development

# Request timeouts (Go duration format: 30s, 5m, 1h)
OFFGRIDFLOW_READ_TIMEOUT=30s
OFFGRIDFLOW_WRITE_TIMEOUT=30s
OFFGRIDFLOW_IDLE_TIMEOUT=120s

# Comma-separated list of trusted proxy IPs/CIDRs
OFFGRIDFLOW_TRUSTED_PROXIES=

# =========================================================================
# DATABASE CONFIGURATION
# =========================================================================
# PostgreSQL connection string
# Format: postgres://user:password@host:port/database?sslmode=disable
# If empty, uses in-memory stores with demo data
OFFGRIDFLOW_DB_DSN=postgres://offgridflow:changeme@localhost:5432/offgridflow?sslmode=disable

# Connection pool settings
OFFGRIDFLOW_DB_MAX_OPEN_CONNS=25
OFFGRIDFLOW_DB_MAX_IDLE_CONNS=10
OFFGRIDFLOW_DB_CONN_MAX_LIFETIME=45m

# =========================================================================
# AUTHENTICATION
# =========================================================================
# Static API key for service-to-service communication
OFFGRIDFLOW_API_KEY=

# JWT secret for signing tokens (minimum 32 chars in production)
OFFGRIDFLOW_JWT_SECRET=dev-secret-change-in-production-to-random-64-char-string

# =========================================================================
# OPENAI / AI CONFIGURATION
# =========================================================================
# OpenAI API key (optional - enables cloud AI provider)
OFFGRIDFLOW_OPENAI_API_KEY=

# OpenAI model to use (default: gpt-4o-mini)
OFFGRIDFLOW_OPENAI_MODEL=gpt-4o-mini

# Optional: Override OpenAI base URL (for Azure OpenAI, proxies)
OFFGRIDFLOW_OPENAI_BASE_URL=

# Local AI provider
OFFGRIDFLOW_LOCAL_AI_URL=http://localhost:11434
OFFGRIDFLOW_LOCAL_AI_MODEL=llama3.2:3b

# =========================================================================
# STRIPE CONFIGURATION
# =========================================================================
# Stripe secret key (starts with sk_test_ or sk_live_)
# If empty, billing is disabled
STRIPE_SECRET_KEY=sk_test_YOUR_KEY_HERE

# Stripe webhook signing secret
STRIPE_WEBHOOK_SECRET=whsec_YOUR_SECRET_HERE

# Stripe price IDs for subscription tiers
STRIPE_PRICE_FREE=price_free_id_here
STRIPE_PRICE_BASIC=price_basic_id_here
STRIPE_PRICE_PRO=price_pro_id_here
STRIPE_PRICE_ENTERPRISE=price_enterprise_id_here

# =========================================================================
# INGESTION CONFIGURATION
# =========================================================================
# Number of days to look back when ingesting historical data
OFFGRIDFLOW_INGEST_LOOKBACK_DAYS=30

# Schedule interval for automatic ingestion (Go duration format)
OFFGRIDFLOW_INGESTION_SCHEDULE_INTERVAL=30m

# ---- AWS INGESTION ----
OFFGRIDFLOW_AWS_INGEST_ENABLED=false
OFFGRIDFLOW_AWS_ACCESS_KEY_ID=
OFFGRIDFLOW_AWS_SECRET_ACCESS_KEY=
OFFGRIDFLOW_AWS_REGION=us-east-1
OFFGRIDFLOW_AWS_ROLE_ARN=
OFFGRIDFLOW_AWS_ACCOUNT_ID=
OFFGRIDFLOW_AWS_S3_BUCKET=
OFFGRIDFLOW_AWS_S3_PREFIX=
OFFGRIDFLOW_AWS_ORG_ID=

# ---- AZURE INGESTION ----
OFFGRIDFLOW_AZURE_INGEST_ENABLED=false
OFFGRIDFLOW_AZURE_TENANT_ID=
OFFGRIDFLOW_AZURE_CLIENT_ID=
OFFGRIDFLOW_AZURE_CLIENT_SECRET=
OFFGRIDFLOW_AZURE_SUBSCRIPTION_ID=
OFFGRIDFLOW_AZURE_ORG_ID=

# ---- GCP INGESTION ----
OFFGRIDFLOW_GCP_INGEST_ENABLED=false
OFFGRIDFLOW_GCP_PROJECT_ID=
OFFGRIDFLOW_GCP_BILLING_ACCOUNT_ID=
OFFGRIDFLOW_GCP_BIGQUERY_DATASET=
OFFGRIDFLOW_GCP_BIGQUERY_TABLE=
OFFGRIDFLOW_GCP_SERVICE_ACCOUNT_KEY=
OFFGRIDFLOW_GCP_ORG_ID=

# ---- SAP INGESTION ----
OFFGRIDFLOW_SAP_INGEST_ENABLED=false
OFFGRIDFLOW_SAP_BASE_URL=
OFFGRIDFLOW_SAP_CLIENT_ID=
OFFGRIDFLOW_SAP_CLIENT_SECRET=
OFFGRIDFLOW_SAP_COMPANY=
OFFGRIDFLOW_SAP_PLANT=
OFFGRIDFLOW_SAP_ORG_ID=

# ---- UTILITY BILLS INGESTION ----
OFFGRIDFLOW_UTILITY_INGEST_ENABLED=false
OFFGRIDFLOW_UTILITY_ORG_ID=

# =========================================================================
# FEATURE FLAGS
# =========================================================================
OFFGRIDFLOW_ENABLE_AUDIT_LOG=false
OFFGRIDFLOW_ENABLE_METRICS=true
OFFGRIDFLOW_ENABLE_GRAPHQL=true
OFFGRIDFLOW_ENABLE_OFFLINE_AI=true

# =========================================================================
# RATE LIMITING TIER OVERRIDES (optional)
# =========================================================================
# Override default rate limits per tier (requests per second / burst size)
# RATELIMIT_FREE_RPS=5
# RATELIMIT_FREE_BURST=5
# RATELIMIT_PRO_RPS=50
# RATELIMIT_PRO_BURST=100
# RATELIMIT_ENTERPRISE_RPS=500
# RATELIMIT_ENTERPRISE_BURST=1000

# =========================================================================
# OBSERVABILITY (OPENTELEMETRY)
# =========================================================================
# Enable/disable tracing (default: true)
OFFGRIDFLOW_TRACING_ENABLED=true

# OTEL collector endpoint (HTTP)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# =========================================================================
# AUTHENTICATION MODE
# =========================================================================
# Require authentication for protected endpoints (default: true)
OFFGRIDFLOW_REQUIRE_AUTH=false

# Cookie settings for session management
OFFGRIDFLOW_COOKIE_DOMAIN=
OFFGRIDFLOW_COOKIE_SECURE=false

# =========================================================================
# DEVELOPMENT / TESTING ONLY
# =========================================================================
# Set to false in production to use real databases
LOG_LEVEL=debug
