# ===================================
# OffGridFlow Production Environment
# ===================================
# Copy this to .env.production and fill in real values
# NEVER commit .env.production to git!

# ===================================
# Database Configuration (REQUIRED)
# ===================================
DATABASE_URL=postgresql://offgridflow:CHANGE_ME@production-db.example.com:5432/offgridflow?sslmode=require
DB_HOST=production-db.example.com
DB_PORT=5432
DB_USER=offgridflow
DB_PASSWORD=GENERATE_STRONG_PASSWORD_HERE
DB_NAME=offgridflow
DB_SSLMODE=require
DB_MAX_CONNECTIONS=100
DB_MIN_CONNECTIONS=10

# ===================================
# Server Configuration (REQUIRED)
# ===================================
PORT=8080
ENV=production
LOG_LEVEL=info
CORS_ORIGINS=https://app.offgridflow.com,https://www.offgridflow.com
TRUSTED_PROXIES=10.0.0.0/8

# ===================================
# JWT & Security (REQUIRED)
# ===================================
# Generate with: openssl rand -base64 48
JWT_SECRET=REPLACE_WITH_64_CHAR_RANDOM_STRING_FROM_OPENSSL
JWT_EXPIRY=24h
REFRESH_TOKEN_EXPIRY=720h
SESSION_SECRET=REPLACE_WITH_64_CHAR_RANDOM_STRING_FROM_OPENSSL
ENCRYPTION_KEY=REPLACE_WITH_32_CHAR_RANDOM_STRING
BCRYPT_COST=12

# ===================================
# Stripe Configuration (REQUIRED)
# ===================================
STRIPE_SECRET_KEY=sk_live_YOUR_LIVE_STRIPE_SECRET_KEY_HERE
STRIPE_PUBLISHABLE_KEY=pk_live_YOUR_LIVE_STRIPE_PUBLISHABLE_KEY_HERE
STRIPE_WEBHOOK_SECRET=whsec_YOUR_LIVE_WEBHOOK_SECRET_HERE
STRIPE_PRICE_ID_STARTER=price_YOUR_STARTER_PRICE_ID
STRIPE_PRICE_ID_PROFESSIONAL=price_YOUR_PROFESSIONAL_PRICE_ID
STRIPE_PRICE_ID_ENTERPRISE=price_YOUR_ENTERPRISE_PRICE_ID

# ===================================
# AWS Configuration (REQUIRED for AWS ingestion)
# ===================================
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
AWS_REGION=us-east-1
AWS_S3_BUCKET=offgridflow-production-data

# ===================================
# Azure Configuration (REQUIRED for Azure ingestion)
# ===================================
AZURE_TENANT_ID=your-tenant-id-here
AZURE_CLIENT_ID=your-client-id-here
AZURE_CLIENT_SECRET=your-client-secret-here
AZURE_SUBSCRIPTION_ID=your-subscription-id-here

# ===================================
# GCP Configuration (REQUIRED for GCP ingestion)
# ===================================
GOOGLE_APPLICATION_CREDENTIALS=/app/secrets/gcp-service-account.json
GCP_PROJECT_ID=your-gcp-project-id

# ===================================
# SAP Configuration (OPTIONAL)
# ===================================
SAP_BASE_URL=https://your-sap-instance.com
SAP_CLIENT_ID=YOUR_SAP_CLIENT_ID
SAP_CLIENT_SECRET=YOUR_SAP_CLIENT_SECRET
SAP_USERNAME=YOUR_SAP_USERNAME
SAP_PASSWORD=YOUR_SAP_PASSWORD

# ===================================
# Utility API Configuration (OPTIONAL)
# ===================================
UTILITY_API_KEY=YOUR_UTILITY_API_KEY
UTILITY_API_BASE_URL=https://api.utilityapi.com

# ===================================
# Email Configuration (REQUIRED)
# ===================================
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USERNAME=apikey
SMTP_PASSWORD=SG.YOUR_SENDGRID_API_KEY_HERE
SMTP_FROM_EMAIL=noreply@offgridflow.com
SMTP_FROM_NAME=OffGridFlow

# ===================================
# Redis Configuration (REQUIRED)
# ===================================
REDIS_URL=redis://:YOUR_REDIS_PASSWORD@production-redis.example.com:6379/0
REDIS_PASSWORD=GENERATE_STRONG_REDIS_PASSWORD
REDIS_MAX_CONNECTIONS=100
REDIS_MIN_IDLE=10

# ===================================
# OpenTelemetry Configuration (REQUIRED)
# ===================================
OTEL_ENABLED=true
OTEL_EXPORTER_OTLP_ENDPOINT=https://otel-collector.production.example.com:4317
OTEL_SERVICE_NAME=offgridflow-api
OTEL_TRACES_ENABLED=true
OTEL_METRICS_ENABLED=true
OTEL_LOGS_ENABLED=true
OTEL_SAMPLING_RATE=0.1

# ===================================
# Job Queue Configuration
# ===================================
WORKER_CONCURRENCY=20
WORKER_POLL_INTERVAL=5s
JOB_RETENTION_DAYS=90
JOB_MAX_RETRIES=3

# ===================================
# Frontend URL (REQUIRED)
# ===================================
FRONTEND_URL=https://app.offgridflow.com

# ===================================
# Rate Limiting (REQUIRED)
# ===================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# Per-tier rate limits (overrides defaults in code)
RATELIMIT_FREE_RPS=5
RATELIMIT_FREE_BURST=10
RATELIMIT_PRO_RPS=50
RATELIMIT_PRO_BURST=100
RATELIMIT_ENTERPRISE_RPS=500
RATELIMIT_ENTERPRISE_BURST=1000

# ===================================
# AI Configuration (OPTIONAL)
# ===================================
AI_MODE=online
AI_API_KEY=sk-YOUR_OPENAI_API_KEY_HERE
AI_MODEL=gpt-4
OLLAMA_BASE_URL=http://ollama-service:11434
OFFLINE_AI_ENABLED=true

# ===================================
# Feature Flags
# ===================================
ENABLE_2FA=true
ENABLE_AUDIT_LOGS=true
ENABLE_MULTI_TENANT=true
ENABLE_WEBHOOKS=true

# ===================================
# Monitoring & Alerts (OPTIONAL)
# ===================================
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
DATADOG_API_KEY=your-datadog-api-key
DATADOG_SITE=datadoghq.com

# ===================================
# Backup Configuration (RECOMMENDED)
# ===================================
BACKUP_ENABLED=true
BACKUP_S3_BUCKET=offgridflow-backups
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *

# ===================================
# Security Headers
# ===================================
ENABLE_HSTS=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true
